"""Сервис для эхо-функциональности.

Этот сервис содержит бизнес-логику обработки эхо-сообщений.
Он не зависит от aiogram и Telegram, поэтому его легко тестировать.
"""


class EchoService:
    """Сервис для обработки эхо-сообщений.
    
    Этот класс обрабатывает текстовые сообщения и возвращает результат.
    Он не знает о Telegram - это чистая бизнес-логика.
    """
    
    @staticmethod
    def process_message(text: str | None) -> str:
        """Обрабатывает текстовое сообщение и возвращает ответ.
        
        Если сообщение содержит текст, возвращает его обратно.
        Если текста нет, возвращает сообщение об ошибке.
        
        Args:
            text: Текст сообщения или None, если текста нет
            
        Returns:
            str: Ответ бота на сообщение
        """
        if text is None or text.strip() == "":
            return "Получено сообщение, но я могу повторять только текстовые сообщения."
        
        return text
    
    @staticmethod
    def is_text_message(text: str | None) -> bool:
        """Проверяет, является ли сообщение текстовым.
        
        Args:
            text: Текст сообщения или None
            
        Returns:
            bool: True, если сообщение содержит текст, False иначе
        """
        return text is not None and text.strip() != ""
