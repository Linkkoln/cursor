import os
import random
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from dotenv import load_dotenv

# Загрузка переменных окружения
load_dotenv()

# Получение токена из переменных окружения
TOKEN = os.getenv('BOT_TOKEN')

# Создание бота и диспетчера
bot = Bot(token=TOKEN)
dp = Dispatcher()

# Список анекдотов
jokes = [
    "— Доктор, у меня бессонница.\n— А вы пробовали спать по ночам?",
    "— Доктор, я себя чувствую, как половой инвертор.\n— А как вы это поняли?\n— Да у меня жена наоборот!",
    "— Доктор, у меня каждый день разные симптомы.\n— Это хорошо, что разные?\n— Нет, это плохо — одинаковых нет!",
    "— Доктор, у меня в голове поселился червь.\n— Какой?\n— Не знаю, но он говорит, что он доктор наук!",
    "— Доктор, я забыл, как зовут мою жену.\n— А как её зовут?\n— Не помню.",
    "— Доктор, у меня комплекс вины.\n— А что в этом плохого?\n— Да ничего, просто я виноват, что у меня комплекс вины.",
    "— Доктор, я думаю, что я бабочка.\n— А вы думали об этом всерьез?\n— Да, особенно, когда летал!",
    "— Доктор, у меня амнезия.\n— А когда у вас это началось?\n— Не помню.",
    "— Доктор, я чувствую, что превращаюсь в моль.\n— А когда это началось?\n— Не в темное же время суток!",
    "— Доктор, у меня такое ощущение, что я собака.\n— А почему вы так думаете?\n— Потому что прихожу к вам на каждую встречу!",
    "— Папа, а что такое архитектура?\n— Это когда ты построил дом, а он не рухнул.",
    "— Почем фунт лиха?\n— Два с грошом, да полушка за вдумчивость.",
    "— Что будет, если скрестить акулу и кенгуру?\n— Прыгающий сапог с зубами.",
    "— Почему программисты не любят ходить на пикники?\n— Потому что они предпочитают баги в коде, а не в еде.",
    "— Какой твой любимый напиток?\n— Кофе... потому что он помогает мне думать в бинарном коде.",
    "— Почему программисты не ходят в лес?\n— Потому что там полно багов!"
]

# Обработчик команды /start
@dp.message(Command(commands=['start']))
async def send_welcome(message: types.Message):
    """Приветствие пользователя при запуске бота"""
    await message.answer("Привет! Я бот, который расскажет тебе анекдот. Просто отправь мне любое сообщение!")

# Обработчик любых текстовых сообщений
@dp.message()
async def send_joke(message: types.Message):
    """Отправка случайного анекдота на любое сообщение"""
    joke = random.choice(jokes)
    await message.answer(joke)

# Запуск бота
if __name__ == '__main__':
    print("Бот запущен...")
    dp.run_polling(bot)